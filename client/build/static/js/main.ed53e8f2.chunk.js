(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,r){e.exports=r(61)},44:function(e,t,r){},61:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(10),o=r.n(a),i=r(9),s=r(7),u=r(29),l=r(63),d=r(64),p=(r(44),r(65)),f=r(30),m=r.n(f),y=(r(49),r(50),r(15)),b=r.n(y),O=function(){var e=Object(s.d)((function(e){return e}),s.b);return c.a.createElement("div",{className:"main-content"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-7 order-last order-md-first"},c.a.createElement("div",{className:"document-holder"},c.a.createElement("div",{className:"currentusers"},Object.entries(e.currentUsersReducer.currentUsers).map((function(e,t){return c.a.createElement(c.a.Fragment,{key:e[1].username+"".concat(t)},c.a.createElement("span",{id:"Hi".concat(e[1].username),className:"userInfo"},c.a.createElement(b.a,{className:"account__avatar identicon",size:5,scale:8,seed:e[1].username})),c.a.createElement(p.a,{placement:"top",target:"Hi".concat(e[1].username)},e[1].username))}))),c.a.createElement(m.a,{options:{placeholder:{text:e.textReducer?"Start writing your document here":""},toolbar:{buttons:["bold","italic","underline"]}},className:"body-editor h-75 unique_and_mandatory_class_name",text:e.textReducer,onChange:function(t){e.clientReducer.client.send(JSON.stringify({type:"contentchange",username:e.logInReducer.username,content:t}))}}))),c.a.createElement("div",{className:"col-md-5 order-first order-md-first"},c.a.createElement("div",{className:"history-holder"},c.a.createElement("ul",null,Object.entries(e.userActivityReducer.userActivity).map((function(e,t){return c.a.createElement("li",{key:"activity-".concat(t)},e[1])})))))))},v=function(e){return{type:"UPDATE_TEXT",payload:e[0]}},E=function(){var e=Object(s.d)((function(e){return e}),s.b),t=Object(s.c)(),r=Object(n.useRef)(null);return c.a.createElement("div",{className:"account"},c.a.createElement("div",{className:"account__wrapper"},c.a.createElement("div",{className:"account__card"},c.a.createElement("div",{className:"account__profile"},c.a.createElement(b.a,{className:"account__avatar identicon",size:10,scale:10,seed:"randomness"}),e.websocketReducer.websocketConnected?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"account__name"},"Hello, user!"),c.a.createElement("p",{className:"account__sub"},"Join to edit the document")):c.a.createElement("p",{className:"text-center"},"Connecting to server. Please wait...")),c.a.createElement("form",{onSubmit:function(n){var c=r.current.value.replace(/ /g,"");if(!e.websocketReducer.websocketConnected)return n.preventDefault();t({type:"SET_USERNAME",payload:c}),e.clientReducer.client.send(JSON.stringify({username:c,type:"userevent"})),n.preventDefault()}},c.a.createElement("input",{name:"username",type:"text",title:"No special characters and less than 16 characters",pattern:"[\\sA-Za-z0-9\\s]{1,15}",ref:r,className:"form-control",required:!0}),c.a.createElement("input",{type:"submit",className:"btn account__btn",value:"Join"})))))};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(){var e=Object(s.c)(),t=["Start writing your document here"],r=Object(s.d)((function(e){return e}),s.b);return Object(n.useEffect)((function(){var t=new u.w3cwebsocket("ws://ec2-52-90-200-136.compute-1.amazonaws.com:4000");t.onopen=function(){console.log("WebSocket Client Connected"),e({type:"UPDATE_CLIENT",payload:{client:t}}),e(function(e){return{type:"CONNECT_WEBSOCKET",payload:e}}({websocketConnected:!0}))}}),[e]),Object(n.useEffect)((function(){r.logInReducer&&(r.clientReducer.client.onmessage=function(n){var c=JSON.parse(n.data),a={};if("userevent"===c.type)c.data.editorContent?(a.currentUsers=Object.values(c.data.users),a.text=[c.data.editorContent]):(a.currentUsers=Object.values(c.data.users),a.text=r.textReducer.length?[r.textReducer]:t);else if("contentchange"===c.type)return a.text=[c.data.editorContent]||!1,e(v(h({},a.text)));a.userActivity=c.data.userActivity,e({type:"UPDATE_CURRENT_USERS",payload:h({},a.currentUsers)}),e(function(e){return{type:"UPDATE_USER_ACTIVITY",payload:e}}(h({},a.userActivity))),e(v(h({},a.text)))})})),c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{color:"light",light:!0},null!=r.logInReducer?c.a.createElement(d.a,{href:"/"},"Exit document editor"):c.a.createElement(d.a,{href:"/"},"Real-time document editor")),c.a.createElement("div",{className:"container-fluid"},null!=r.logInReducer?c.a.createElement(O,null):c.a.createElement(E,null)))},w=r(12);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAME":return _({},e,{username:t.payload});default:return e}};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={websocketConnected:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_WEBSOCKET":return D({},e,{websocketConnected:t.payload.websocketConnected});default:return e}};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={client:""},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CLIENT":return U({},e,{client:t.payload.client});default:return e}};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J="",W={currentUsers:{}},z={userActivity:{}},B=Object(w.b)({logInReducer:N,clientReducer:A,websocketReducer:T,userActivityReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;if(void 0===t.payload)return e;switch(t.type){case"UPDATE_USER_ACTIVITY":return I({},e,{userActivity:t.payload});default:return e}},currentUsersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;if(void 0===t.payload)return e;switch(t.type){case"UPDATE_CURRENT_USERS":return I({},e,{currentUsers:t.payload});default:return e}},textReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;if(void 0===t.payload)return e;switch(t.type){case"UPDATE_TEXT":return t.payload;default:return e}}}),F=Object(w.c)(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(s.a,{store:F},c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.ed53e8f2.chunk.js.map